import{R as x}from"./ui-vendor-CP5T01f1.js";var he=e=>e.type==="checkbox",le=e=>e instanceof Date,q=e=>e==null;const cr=e=>typeof e=="object";var L=e=>!q(e)&&!Array.isArray(e)&&cr(e)&&!le(e),Er=e=>L(e)&&e.target?he(e.target)?e.target.checked:e.target.value:e,Cr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Or=(e,t)=>e.has(Cr(t)),Tr=e=>{const t=e.constructor&&e.constructor.prototype;return L(t)&&t.hasOwnProperty("isPrototypeOf")},We=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function B(e){let t;const r=Array.isArray(e),i=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(We&&(e instanceof Blob||i))&&(r||L(e)))if(t=r?[]:{},!r&&!Tr(e))t=e;else for(const l in e)e.hasOwnProperty(l)&&(t[l]=B(e[l]));else return e;return t}var Ae=e=>Array.isArray(e)?e.filter(Boolean):[],E=e=>e===void 0,f=(e,t,r)=>{if(!t||!L(e))return r;const i=Ae(t.split(/[,[\].]+?/)).reduce((l,n)=>q(l)?l:l[n],e);return E(i)||i===e?E(e[t])?r:e[t]:i},Z=e=>typeof e=="boolean",je=e=>/^\w*$/.test(e),dr=e=>Ae(e.replace(/["|']|\]/g,"").split(/\.|\[/)),D=(e,t,r)=>{let i=-1;const l=je(t)?[t]:dr(t),n=l.length,y=n-1;for(;++i<n;){const g=l[i];let k=r;if(i!==y){const w=e[g];k=L(w)||Array.isArray(w)?w:isNaN(+l[i+1])?{}:[]}if(g==="__proto__"||g==="constructor"||g==="prototype")return;e[g]=k,e=e[g]}return e};const tr={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},te={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},fr=x.createContext(null),yr=()=>x.useContext(fr),Xr=e=>{const{children:t,...r}=e;return x.createElement(fr.Provider,{value:r},t)};var Lr=(e,t,r,i=!0)=>{const l={defaultValues:t._defaultValues};for(const n in e)Object.defineProperty(l,n,{get:()=>{const y=n;return t._proxyFormState[y]!==K.all&&(t._proxyFormState[y]=!i||K.all),e[y]}});return l},j=e=>L(e)&&!Object.keys(e).length,Ur=(e,t,r,i)=>{r(e);const{name:l,...n}=e;return j(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(y=>t[y]===K.all)},H=e=>Array.isArray(e)?e:[e],Rr=(e,t,r)=>!e||!t||e===t||H(e).some(i=>i&&(r?i===t:i.startsWith(t)||t.startsWith(i)));function qe(e){const t=x.useRef(e);t.current=e,x.useEffect(()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var re=e=>typeof e=="string",gr=(e,t,r,i,l)=>re(e)?(i&&t.watch.add(e),f(r,e,l)):Array.isArray(e)?e.map(n=>(i&&t.watch.add(n),f(r,n))):(i&&(t.watchAll=!0),r);function Zr(e){const t=yr(),{control:r=t.control,name:i,defaultValue:l,disabled:n,exact:y}=e,g=x.useRef(i);g.current=i,qe({disabled:n,subject:r._subjects.values,next:S=>{Rr(g.current,S.name,y)&&w(B(gr(g.current,r._names,S.values||r._formValues,!1,l)))}});const[k,w]=x.useState(r._getWatch(i,l));return x.useEffect(()=>r._removeUnmounted()),k}var Mr=(e,t,r,i,l)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:l||!0}}:{},ae=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},De=(e,t,r={})=>r.shouldFocus||E(r.shouldFocus)?r.focusName||`${e}.${E(r.focusIndex)?t:r.focusIndex}.`:"",ve=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched}),Ne=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ce=(e,t,r,i)=>{for(const l of r||Object.keys(e)){const n=f(e,l);if(n){const{_f:y,...g}=n;if(y){if(y.refs&&y.refs[0]&&t(y.refs[0],l)&&!i)return!0;if(y.ref&&t(y.ref,y.name)&&!i)return!0;if(ce(g,t))break}else if(L(g)&&ce(g,t))break}}};var _r=(e,t,r)=>{const i=H(f(e,r));return D(i,"root",t[r]),D(e,r,i),e},He=e=>e.type==="file",ee=e=>typeof e=="function",Fe=e=>{if(!We)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},be=e=>re(e),$e=e=>e.type==="radio",me=e=>e instanceof RegExp;const sr={value:!1,isValid:!1},ir={value:!0,isValid:!0};var vr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!E(e[0].attributes.value)?E(e[0].value)||e[0].value===""?ir:{value:e[0].value,isValid:!0}:ir:sr}return sr};const ar={isValid:!1,value:null};var hr=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,ar):ar;function ur(e,t,r="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||Z(e)&&!e)return{type:r,message:be(e)?e:"",ref:t}}var oe=e=>L(e)&&!me(e)?e:{value:e,message:""},Be=async(e,t,r,i,l,n)=>{const{ref:y,refs:g,required:k,maxLength:w,minLength:S,min:b,max:se,pattern:O,validate:z,name:W,valueAsNumber:Y,mount:X}=e._f,V=f(r,W);if(!X||t.has(W))return{};const G=g?g[0]:y,J=m=>{l&&G.reportValidity&&(G.setCustomValidity(Z(m)?"":m||""),G.reportValidity())},T={},v=$e(y),h=he(y),A=v||h,C=(Y||He(y))&&E(y.value)&&E(V)||Fe(y)&&y.value===""||V===""||Array.isArray(V)&&!V.length,M=Mr.bind(null,W,i,T),ne=(m,p,R,P=te.maxLength,Q=te.minLength)=>{const $=m?p:R;T[W]={type:m?P:Q,message:$,ref:y,...M(m?P:Q,$)}};if(n?!Array.isArray(V)||!V.length:k&&(!A&&(C||q(V))||Z(V)&&!V||h&&!vr(g).isValid||v&&!hr(g).isValid)){const{value:m,message:p}=be(k)?{value:!!k,message:k}:oe(k);if(m&&(T[W]={type:te.required,message:p,ref:G,...M(te.required,p)},!i))return J(p),T}if(!C&&(!q(b)||!q(se))){let m,p;const R=oe(se),P=oe(b);if(!q(V)&&!isNaN(V)){const Q=y.valueAsNumber||V&&+V;q(R.value)||(m=Q>R.value),q(P.value)||(p=Q<P.value)}else{const Q=y.valueAsDate||new Date(V),$=ye=>new Date(new Date().toDateString()+" "+ye),de=y.type=="time",fe=y.type=="week";re(R.value)&&V&&(m=de?$(V)>$(R.value):fe?V>R.value:Q>new Date(R.value)),re(P.value)&&V&&(p=de?$(V)<$(P.value):fe?V<P.value:Q<new Date(P.value))}if((m||p)&&(ne(!!m,R.message,P.message,te.max,te.min),!i))return J(T[W].message),T}if((w||S)&&!C&&(re(V)||n&&Array.isArray(V))){const m=oe(w),p=oe(S),R=!q(m.value)&&V.length>+m.value,P=!q(p.value)&&V.length<+p.value;if((R||P)&&(ne(R,m.message,p.message),!i))return J(T[W].message),T}if(O&&!C&&re(V)){const{value:m,message:p}=oe(O);if(me(m)&&!V.match(m)&&(T[W]={type:te.pattern,message:p,ref:y,...M(te.pattern,p)},!i))return J(p),T}if(z){if(ee(z)){const m=await z(V,r),p=ur(m,G);if(p&&(T[W]={...p,...M(te.validate,p.message)},!i))return J(p.message),T}else if(L(z)){let m={};for(const p in z){if(!j(m)&&!i)break;const R=ur(await z[p](V,r),G,p);R&&(m={...R,...M(p,R.message)},J(R.message),i&&(T[W]=m))}if(!j(m)&&(T[W]={ref:G,...m},!i))return T}}return J(!0),T},ke=(e,t)=>[...e,...H(t)],Ee=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Ce(e,t,r){return[...e.slice(0,t),...H(r),...e.slice(t)]}var Oe=(e,t,r)=>Array.isArray(e)?(E(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],Te=(e,t)=>[...H(t),...H(e)];function Ir(e,t){let r=0;const i=[...e];for(const l of t)i.splice(l-r,1),r++;return Ae(i).length?i:[]}var Le=(e,t)=>E(t)?[]:Ir(e,H(t).sort((r,i)=>r-i)),Ue=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]};function Nr(e,t){const r=t.slice(0,-1).length;let i=0;for(;i<r;)e=E(e)?i++:e[t[i++]];return e}function Br(e){for(const t in e)if(e.hasOwnProperty(t)&&!E(e[t]))return!1;return!0}function U(e,t){const r=Array.isArray(t)?t:je(t)?[t]:dr(t),i=r.length===1?e:Nr(e,r),l=r.length-1,n=r[l];return i&&delete i[n],l!==0&&(L(i)&&j(i)||Array.isArray(i)&&Br(i))&&U(e,r.slice(0,-1)),e}var nr=(e,t,r)=>(e[t]=r,e);function et(e){const t=yr(),{control:r=t.control,name:i,keyName:l="id",shouldUnregister:n,rules:y}=e,[g,k]=x.useState(r._getFieldArray(i)),w=x.useRef(r._getFieldArray(i).map(ae)),S=x.useRef(g),b=x.useRef(i),se=x.useRef(!1);b.current=i,S.current=g,r._names.array.add(i),y&&r.register(i,y),qe({next:({values:v,name:h})=>{if(h===b.current||!h){const A=f(v,b.current);Array.isArray(A)&&(k(A),w.current=A.map(ae))}},subject:r._subjects.array});const O=x.useCallback(v=>{se.current=!0,r._updateFieldArray(i,v)},[r,i]),z=(v,h)=>{const A=H(B(v)),C=ke(r._getFieldArray(i),A);r._names.focus=De(i,C.length-1,h),w.current=ke(w.current,A.map(ae)),O(C),k(C),r._updateFieldArray(i,C,ke,{argA:Ee(v)})},W=(v,h)=>{const A=H(B(v)),C=Te(r._getFieldArray(i),A);r._names.focus=De(i,0,h),w.current=Te(w.current,A.map(ae)),O(C),k(C),r._updateFieldArray(i,C,Te,{argA:Ee(v)})},Y=v=>{const h=Le(r._getFieldArray(i),v);w.current=Le(w.current,v),O(h),k(h),!Array.isArray(f(r._fields,i))&&D(r._fields,i,void 0),r._updateFieldArray(i,h,Le,{argA:v})},X=(v,h,A)=>{const C=H(B(h)),M=Ce(r._getFieldArray(i),v,C);r._names.focus=De(i,v,A),w.current=Ce(w.current,v,C.map(ae)),O(M),k(M),r._updateFieldArray(i,M,Ce,{argA:v,argB:Ee(h)})},V=(v,h)=>{const A=r._getFieldArray(i);Ue(A,v,h),Ue(w.current,v,h),O(A),k(A),r._updateFieldArray(i,A,Ue,{argA:v,argB:h},!1)},G=(v,h)=>{const A=r._getFieldArray(i);Oe(A,v,h),Oe(w.current,v,h),O(A),k(A),r._updateFieldArray(i,A,Oe,{argA:v,argB:h},!1)},J=(v,h)=>{const A=B(h),C=nr(r._getFieldArray(i),v,A);w.current=[...C].map((M,ne)=>!M||ne===v?ae():w.current[ne]),O(C),k([...C]),r._updateFieldArray(i,C,nr,{argA:v,argB:A},!0,!1)},T=v=>{const h=H(B(v));w.current=h.map(ae),O([...h]),k([...h]),r._updateFieldArray(i,[...h],A=>A,{},!0,!1)};return x.useEffect(()=>{if(r._state.action=!1,Ne(i,r._names)&&r._subjects.state.next({...r._formState}),se.current&&(!ve(r._options.mode).isOnSubmit||r._formState.isSubmitted))if(r._options.resolver)r._executeSchema([i]).then(v=>{const h=f(v.errors,i),A=f(r._formState.errors,i);(A?!h&&A.type||h&&(A.type!==h.type||A.message!==h.message):h&&h.type)&&(h?D(r._formState.errors,i,h):U(r._formState.errors,i),r._subjects.state.next({errors:r._formState.errors}))});else{const v=f(r._fields,i);v&&v._f&&!(ve(r._options.reValidateMode).isOnSubmit&&ve(r._options.mode).isOnSubmit)&&Be(v,r._names.disabled,r._formValues,r._options.criteriaMode===K.all,r._options.shouldUseNativeValidation,!0).then(h=>!j(h)&&r._subjects.state.next({errors:_r(r._formState.errors,h,i)}))}r._subjects.values.next({name:i,values:{...r._formValues}}),r._names.focus&&ce(r._fields,(v,h)=>{if(r._names.focus&&h.startsWith(r._names.focus)&&v.focus)return v.focus(),1}),r._names.focus="",r._updateValid(),se.current=!1},[g,i,r]),x.useEffect(()=>(!f(r._formValues,i)&&r._updateFieldArray(i),()=>{(r._options.shouldUnregister||n)&&r.unregister(i)}),[i,r,l,n]),{swap:x.useCallback(V,[O,i,r]),move:x.useCallback(G,[O,i,r]),prepend:x.useCallback(W,[O,i,r]),append:x.useCallback(z,[O,i,r]),remove:x.useCallback(Y,[O,i,r]),insert:x.useCallback(X,[O,i,r]),update:x.useCallback(J,[O,i,r]),replace:x.useCallback(T,[O,i,r]),fields:x.useMemo(()=>g.map((v,h)=>({...v,[l]:w.current[h]||ae()})),[g,l])}}var Re=()=>{let e=[];return{get observers(){return e},next:l=>{for(const n of e)n.next&&n.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(n=>n!==l)}}),unsubscribe:()=>{e=[]}}},Pe=e=>q(e)||!cr(e);function ue(e,t){if(Pe(e)||Pe(t))return e===t;if(le(e)&&le(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const l of r){const n=e[l];if(!i.includes(l))return!1;if(l!=="ref"){const y=t[l];if(le(n)&&le(y)||L(n)&&L(y)||Array.isArray(n)&&Array.isArray(y)?!ue(n,y):n!==y)return!1}}return!0}var Ar=e=>e.type==="select-multiple",Pr=e=>$e(e)||he(e),Me=e=>Fe(e)&&e.isConnected,br=e=>{for(const t in e)if(ee(e[t]))return!0;return!1};function xe(e,t={}){const r=Array.isArray(e);if(L(e)||r)for(const i in e)Array.isArray(e[i])||L(e[i])&&!br(e[i])?(t[i]=Array.isArray(e[i])?[]:{},xe(e[i],t[i])):q(e[i])||(t[i]=!0);return t}function Fr(e,t,r){const i=Array.isArray(e);if(L(e)||i)for(const l in e)Array.isArray(e[l])||L(e[l])&&!br(e[l])?E(t)||Pe(r[l])?r[l]=Array.isArray(e[l])?xe(e[l],[]):{...xe(e[l])}:Fr(e[l],q(t)?{}:t[l],r[l]):r[l]=!ue(e[l],t[l]);return r}var ge=(e,t)=>Fr(e,t,xe(t)),mr=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>E(e)?e:t?e===""?NaN:e&&+e:r&&re(e)?new Date(e):i?i(e):e;function Ie(e){const t=e.ref;return He(t)?t.files:$e(t)?hr(e.refs).value:Ar(t)?[...t.selectedOptions].map(({value:r})=>r):he(t)?vr(e.refs).value:mr(E(t.value)?e.ref.value:t.value,e)}var Wr=(e,t,r,i)=>{const l={};for(const n of e){const y=f(t,n);y&&D(l,n,y._f)}return{criteriaMode:r,names:[...e],fields:l,shouldUseNativeValidation:i}},_e=e=>E(e)?e:me(e)?e.source:L(e)?me(e.value)?e.value.source:e.value:e;const lr="AsyncFunction";var jr=e=>!!e&&!!e.validate&&!!(ee(e.validate)&&e.validate.constructor.name===lr||L(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===lr)),qr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function or(e,t,r){const i=f(e,r);if(i||je(r))return{error:i,name:r};const l=r.split(".");for(;l.length;){const n=l.join("."),y=f(t,n),g=f(e,n);if(y&&!Array.isArray(y)&&r!==n)return{name:r};if(g&&g.type)return{name:n,error:g};l.pop()}return{name:r}}var Hr=(e,t,r,i,l)=>l.isOnAll?!1:!r&&l.isOnTouch?!(t||e):(r?i.isOnBlur:l.isOnBlur)?!e:(r?i.isOnChange:l.isOnChange)?e:!0,$r=(e,t)=>!Ae(f(e,t)).length&&U(e,t);const Kr={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function zr(e={}){let t={...Kr,...e},r={submitCount:0,isDirty:!1,isLoading:ee(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},l=L(t.defaultValues)||L(t.values)?B(t.defaultValues||t.values)||{}:{},n=t.shouldUnregister?{}:B(l),y={action:!1,mount:!1,watch:!1},g={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},k,w=0;const S={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},b={values:Re(),array:Re(),state:Re()},se=ve(t.mode),O=ve(t.reValidateMode),z=t.criteriaMode===K.all,W=s=>a=>{clearTimeout(w),w=setTimeout(s,a)},Y=async s=>{if(!t.disabled&&(S.isValid||s)){const a=t.resolver?j((await A()).errors):await M(i,!0);a!==r.isValid&&b.state.next({isValid:a})}},X=(s,a)=>{!t.disabled&&(S.isValidating||S.validatingFields)&&((s||Array.from(g.mount)).forEach(u=>{u&&(a?D(r.validatingFields,u,a):U(r.validatingFields,u))}),b.state.next({validatingFields:r.validatingFields,isValidating:!j(r.validatingFields)}))},V=(s,a=[],u,d,c=!0,o=!0)=>{if(d&&u&&!t.disabled){if(y.action=!0,o&&Array.isArray(f(i,s))){const _=u(f(i,s),d.argA,d.argB);c&&D(i,s,_)}if(o&&Array.isArray(f(r.errors,s))){const _=u(f(r.errors,s),d.argA,d.argB);c&&D(r.errors,s,_),$r(r.errors,s)}if(S.touchedFields&&o&&Array.isArray(f(r.touchedFields,s))){const _=u(f(r.touchedFields,s),d.argA,d.argB);c&&D(r.touchedFields,s,_)}S.dirtyFields&&(r.dirtyFields=ge(l,n)),b.state.next({name:s,isDirty:m(s,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else D(n,s,a)},G=(s,a)=>{D(r.errors,s,a),b.state.next({errors:r.errors})},J=s=>{r.errors=s,b.state.next({errors:r.errors,isValid:!1})},T=(s,a,u,d)=>{const c=f(i,s);if(c){const o=f(n,s,E(u)?f(l,s):u);E(o)||d&&d.defaultChecked||a?D(n,s,a?o:Ie(c._f)):P(s,o),y.mount&&Y()}},v=(s,a,u,d,c)=>{let o=!1,_=!1;const F={name:s};if(!t.disabled){const I=!!(f(i,s)&&f(i,s)._f&&f(i,s)._f.disabled);if(!u||d){S.isDirty&&(_=r.isDirty,r.isDirty=F.isDirty=m(),o=_!==F.isDirty);const N=I||ue(f(l,s),a);_=!!(!I&&f(r.dirtyFields,s)),N||I?U(r.dirtyFields,s):D(r.dirtyFields,s,!0),F.dirtyFields=r.dirtyFields,o=o||S.dirtyFields&&_!==!N}if(u){const N=f(r.touchedFields,s);N||(D(r.touchedFields,s,u),F.touchedFields=r.touchedFields,o=o||S.touchedFields&&N!==u)}o&&c&&b.state.next(F)}return o?F:{}},h=(s,a,u,d)=>{const c=f(r.errors,s),o=S.isValid&&Z(a)&&r.isValid!==a;if(t.delayError&&u?(k=W(()=>G(s,u)),k(t.delayError)):(clearTimeout(w),k=null,u?D(r.errors,s,u):U(r.errors,s)),(u?!ue(c,u):c)||!j(d)||o){const _={...d,...o&&Z(a)?{isValid:a}:{},errors:r.errors,name:s};r={...r,..._},b.state.next(_)}},A=async s=>{X(s,!0);const a=await t.resolver(n,t.context,Wr(s||g.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return X(s),a},C=async s=>{const{errors:a}=await A(s);if(s)for(const u of s){const d=f(a,u);d?D(r.errors,u,d):U(r.errors,u)}else r.errors=a;return a},M=async(s,a,u={valid:!0})=>{for(const d in s){const c=s[d];if(c){const{_f:o,..._}=c;if(o){const F=g.array.has(o.name),I=c._f&&jr(c._f);I&&S.validatingFields&&X([d],!0);const N=await Be(c,g.disabled,n,z,t.shouldUseNativeValidation&&!a,F);if(I&&S.validatingFields&&X([d]),N[o.name]&&(u.valid=!1,a))break;!a&&(f(N,o.name)?F?_r(r.errors,N,o.name):D(r.errors,o.name,N[o.name]):U(r.errors,o.name))}!j(_)&&await M(_,a,u)}}return u.valid},ne=()=>{for(const s of g.unMount){const a=f(i,s);a&&(a._f.refs?a._f.refs.every(u=>!Me(u)):!Me(a._f.ref))&&Ve(s)}g.unMount=new Set},m=(s,a)=>!t.disabled&&(s&&a&&D(n,s,a),!ue(Ke(),l)),p=(s,a,u)=>gr(s,g,{...y.mount?n:E(a)?l:re(s)?{[s]:a}:a},u,a),R=s=>Ae(f(y.mount?n:l,s,t.shouldUnregister?f(l,s,[]):[])),P=(s,a,u={})=>{const d=f(i,s);let c=a;if(d){const o=d._f;o&&(!o.disabled&&D(n,s,mr(a,o)),c=Fe(o.ref)&&q(a)?"":a,Ar(o.ref)?[...o.ref.options].forEach(_=>_.selected=c.includes(_.value)):o.refs?he(o.ref)?o.refs.length>1?o.refs.forEach(_=>(!_.defaultChecked||!_.disabled)&&(_.checked=Array.isArray(c)?!!c.find(F=>F===_.value):c===_.value)):o.refs[0]&&(o.refs[0].checked=!!c):o.refs.forEach(_=>_.checked=_.value===c):He(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||b.values.next({name:s,values:{...n}})))}(u.shouldDirty||u.shouldTouch)&&v(s,c,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&ye(s)},Q=(s,a,u)=>{for(const d in a){const c=a[d],o=`${s}.${d}`,_=f(i,o);(g.array.has(s)||L(c)||_&&!_._f)&&!le(c)?Q(o,c,u):P(o,c,u)}},$=(s,a,u={})=>{const d=f(i,s),c=g.array.has(s),o=B(a);D(n,s,o),c?(b.array.next({name:s,values:{...n}}),(S.isDirty||S.dirtyFields)&&u.shouldDirty&&b.state.next({name:s,dirtyFields:ge(l,n),isDirty:m(s,o)})):d&&!d._f&&!q(o)?Q(s,o,u):P(s,o,u),Ne(s,g)&&b.state.next({...r}),b.values.next({name:y.mount?s:void 0,values:{...n}})},de=async s=>{y.mount=!0;const a=s.target;let u=a.name,d=!0;const c=f(i,u),o=()=>a.type?Ie(c._f):Er(s),_=F=>{d=Number.isNaN(F)||le(F)&&isNaN(F.getTime())||ue(F,f(n,u,F))};if(c){let F,I;const N=o(),ie=s.type===tr.BLUR||s.type===tr.FOCUS_OUT,Sr=!qr(c._f)&&!t.resolver&&!f(r.errors,u)&&!c._f.deps||Hr(ie,f(r.touchedFields,u),r.isSubmitted,O,se),we=Ne(u,g,ie);D(n,u,N),ie?(c._f.onBlur&&c._f.onBlur(s),k&&k(0)):c._f.onChange&&c._f.onChange(s);const Se=v(u,N,ie,!1),Dr=!j(Se)||we;if(!ie&&b.values.next({name:u,type:s.type,values:{...n}}),Sr)return S.isValid&&(t.mode==="onBlur"&&ie?Y():ie||Y()),Dr&&b.state.next({name:u,...we?{}:Se});if(!ie&&we&&b.state.next({...r}),t.resolver){const{errors:er}=await A([u]);if(_(N),d){const kr=or(r.errors,i,u),rr=or(er,i,kr.name||u);F=rr.error,u=rr.name,I=j(er)}}else X([u],!0),F=(await Be(c,g.disabled,n,z,t.shouldUseNativeValidation))[u],X([u]),_(N),d&&(F?I=!1:S.isValid&&(I=await M(i,!0)));d&&(c._f.deps&&ye(c._f.deps),h(u,I,F,Se))}},fe=(s,a)=>{if(f(r.errors,a)&&s.focus)return s.focus(),1},ye=async(s,a={})=>{let u,d;const c=H(s);if(t.resolver){const o=await C(E(s)?s:c);u=j(o),d=s?!c.some(_=>f(o,_)):u}else s?(d=(await Promise.all(c.map(async o=>{const _=f(i,o);return await M(_&&_._f?{[o]:_}:_)}))).every(Boolean),!(!d&&!r.isValid)&&Y()):d=u=await M(i);return b.state.next({...!re(s)||S.isValid&&u!==r.isValid?{}:{name:s},...t.resolver||!s?{isValid:u}:{},errors:r.errors}),a.shouldFocus&&!d&&ce(i,fe,s?c:g.mount),d},Ke=s=>{const a={...y.mount?n:l};return E(s)?a:re(s)?f(a,s):s.map(u=>f(a,u))},ze=(s,a)=>({invalid:!!f((a||r).errors,s),isDirty:!!f((a||r).dirtyFields,s),error:f((a||r).errors,s),isValidating:!!f(r.validatingFields,s),isTouched:!!f((a||r).touchedFields,s)}),xr=s=>{s&&H(s).forEach(a=>U(r.errors,a)),b.state.next({errors:s?r.errors:{}})},Ye=(s,a,u)=>{const d=(f(i,s,{_f:{}})._f||{}).ref,c=f(r.errors,s)||{},{ref:o,message:_,type:F,...I}=c;D(r.errors,s,{...I,...a,ref:d}),b.state.next({name:s,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&d&&d.focus&&d.focus()},Vr=(s,a)=>ee(s)?b.values.subscribe({next:u=>s(p(void 0,a),u)}):p(s,a,!0),Ve=(s,a={})=>{for(const u of s?H(s):g.mount)g.mount.delete(u),g.array.delete(u),a.keepValue||(U(i,u),U(n,u)),!a.keepError&&U(r.errors,u),!a.keepDirty&&U(r.dirtyFields,u),!a.keepTouched&&U(r.touchedFields,u),!a.keepIsValidating&&U(r.validatingFields,u),!t.shouldUnregister&&!a.keepDefaultValue&&U(l,u);b.values.next({values:{...n}}),b.state.next({...r,...a.keepDirty?{isDirty:m()}:{}}),!a.keepIsValid&&Y()},Ge=({disabled:s,name:a,field:u,fields:d})=>{(Z(s)&&y.mount||s||g.disabled.has(a))&&(s?g.disabled.add(a):g.disabled.delete(a),v(a,Ie(u?u._f:f(d,a)._f),!1,!1,!0))},pe=(s,a={})=>{let u=f(i,s);const d=Z(a.disabled)||Z(t.disabled);return D(i,s,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:s}},name:s,mount:!0,...a}}),g.mount.add(s),u?Ge({field:u,disabled:Z(a.disabled)?a.disabled:t.disabled,name:s}):T(s,!0,a.value),{...d?{disabled:a.disabled||t.disabled}:{},...t.progressive?{required:!!a.required,min:_e(a.min),max:_e(a.max),minLength:_e(a.minLength),maxLength:_e(a.maxLength),pattern:_e(a.pattern)}:{},name:s,onChange:de,onBlur:de,ref:c=>{if(c){pe(s,a),u=f(i,s);const o=E(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,_=Pr(o),F=u._f.refs||[];if(_?F.find(I=>I===o):o===u._f.ref)return;D(i,s,{_f:{...u._f,..._?{refs:[...F.filter(Me),o,...Array.isArray(f(l,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),T(s,!1,void 0,o)}else u=f(i,s,{}),u._f&&(u._f.mount=!1),(t.shouldUnregister||a.shouldUnregister)&&!(Or(g.array,s)&&y.action)&&g.unMount.add(s)}}},Je=()=>t.shouldFocusError&&ce(i,fe,g.mount),pr=s=>{Z(s)&&(b.state.next({disabled:s}),ce(i,(a,u)=>{const d=f(i,u);d&&(a.disabled=d._f.disabled||s,Array.isArray(d._f.refs)&&d._f.refs.forEach(c=>{c.disabled=d._f.disabled||s}))},0,!1))},Qe=(s,a)=>async u=>{let d;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let c=B(n);if(g.disabled.size)for(const o of g.disabled)D(c,o,void 0);if(b.state.next({isSubmitting:!0}),t.resolver){const{errors:o,values:_}=await A();r.errors=o,c=_}else await M(i);if(U(r.errors,"root"),j(r.errors)){b.state.next({errors:{}});try{await s(c,u)}catch(o){d=o}}else a&&await a({...r.errors},u),Je(),setTimeout(Je);if(b.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:j(r.errors)&&!d,submitCount:r.submitCount+1,errors:r.errors}),d)throw d},wr=(s,a={})=>{f(i,s)&&(E(a.defaultValue)?$(s,B(f(l,s))):($(s,a.defaultValue),D(l,s,B(a.defaultValue))),a.keepTouched||U(r.touchedFields,s),a.keepDirty||(U(r.dirtyFields,s),r.isDirty=a.defaultValue?m(s,B(f(l,s))):m()),a.keepError||(U(r.errors,s),S.isValid&&Y()),b.state.next({...r}))},Xe=(s,a={})=>{const u=s?B(s):l,d=B(u),c=j(s),o=c?l:d;if(a.keepDefaultValues||(l=u),!a.keepValues){if(a.keepDirtyValues){const _=new Set([...g.mount,...Object.keys(ge(l,n))]);for(const F of Array.from(_))f(r.dirtyFields,F)?D(o,F,f(n,F)):$(F,f(o,F))}else{if(We&&E(s))for(const _ of g.mount){const F=f(i,_);if(F&&F._f){const I=Array.isArray(F._f.refs)?F._f.refs[0]:F._f.ref;if(Fe(I)){const N=I.closest("form");if(N){N.reset();break}}}}i={}}n=t.shouldUnregister?a.keepDefaultValues?B(l):{}:B(o),b.array.next({values:{...o}}),b.values.next({values:{...o}})}g={mount:a.keepDirtyValues?g.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},y.mount=!S.isValid||!!a.keepIsValid||!!a.keepDirtyValues,y.watch=!!t.shouldUnregister,b.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:c?!1:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!ue(s,l)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:c?{}:a.keepDirtyValues?a.keepDefaultValues&&n?ge(l,n):r.dirtyFields:a.keepDefaultValues&&s?ge(l,s):a.keepDirty?r.dirtyFields:{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ze=(s,a)=>Xe(ee(s)?s(n):s,a);return{control:{register:pe,unregister:Ve,getFieldState:ze,handleSubmit:Qe,setError:Ye,_executeSchema:A,_getWatch:p,_getDirty:m,_updateValid:Y,_removeUnmounted:ne,_updateFieldArray:V,_updateDisabledField:Ge,_getFieldArray:R,_reset:Xe,_resetDefaultValues:()=>ee(t.defaultValues)&&t.defaultValues().then(s=>{Ze(s,t.resetOptions),b.state.next({isLoading:!1})}),_updateFormState:s=>{r={...r,...s}},_disableForm:pr,_subjects:b,_proxyFormState:S,_setErrors:J,get _fields(){return i},get _formValues(){return n},get _state(){return y},set _state(s){y=s},get _defaultValues(){return l},get _names(){return g},set _names(s){g=s},get _formState(){return r},set _formState(s){r=s},get _options(){return t},set _options(s){t={...t,...s}}},trigger:ye,register:pe,handleSubmit:Qe,watch:Vr,setValue:$,getValues:Ke,reset:Ze,resetField:wr,clearErrors:xr,unregister:Ve,setError:Ye,setFocus:(s,a={})=>{const u=f(i,s),d=u&&u._f;if(d){const c=d.refs?d.refs[0]:d.ref;c.focus&&(c.focus(),a.shouldSelect&&ee(c.select)&&c.select())}},getFieldState:ze}}function rt(e={}){const t=x.useRef(void 0),r=x.useRef(void 0),[i,l]=x.useState({isDirty:!1,isValidating:!1,isLoading:ee(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:ee(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...zr(e),formState:i});const n=t.current.control;return n._options=e,qe({subject:n._subjects.state,next:y=>{Ur(y,n._proxyFormState,n._updateFormState)&&l({...n._formState})}}),x.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),x.useEffect(()=>{if(n._proxyFormState.isDirty){const y=n._getDirty();y!==i.isDirty&&n._subjects.state.next({isDirty:y})}},[n,i.isDirty]),x.useEffect(()=>{e.values&&!ue(e.values,r.current)?(n._reset(e.values,n._options.resetOptions),r.current=e.values,l(y=>({...y}))):n._resetDefaultValues()},[e.values,n]),x.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),x.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),x.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),t.current.formState=Lr(i,n),t.current}export{Xr as F,rt as a,et as b,Zr as c,yr as u};
